% Language & Encoding
\usepackage[T1]{fontenc}
\usepackage[german]{babel}  % Deutsche Sprache in automatisch generiertem
\usepackage[fixlanguage]{babelbib}
\usepackage[utf8]{inputenc}

% General Setup
\usepackage{etex}
\usepackage{ifthen}     % If-Then-Statements
\usepackage{pdfpages}
\usepackage{tikz}
\usetikzlibrary{shapes,arrows,topaths,automata}

\definecolor{Blue}{HTML}{2D2F92}
\definecolor{OliveGreen}{HTML}{3C8031}
\definecolor{Fuchsia}{HTML}{8C368C}

\author{Chris Köcher, Philipp Schlag}
\title{Projektseminar: Experimentelle Untersuchung des ``Split-and-Share''-Verfahrens}
\date{Wintersemester 2015\\\small Letzte Änderung: \today}

\usepackage{hyperref}      % Hyperlinks & PDF specific information
\hypersetup{
 unicode,
 hypertexnames=false,
 linkcolor=Blue,
 citecolor=OliveGreen,
 urlcolor=Fuchsia,
 colorlinks=true,
 linktoc=all,
 pdfborder={0 0 0},
 pdftitle={Projektseminar: Experimentelle Untersuchung des ``Split-and-Share''-Verfahrens},
 pdfauthor={Chris Köcher, Philipp Schlag}
}

% Page Geometry
\usepackage[a4paper]{geometry}  % A4-Seite mit vielen Layout-Optionen
\geometry{
    twoside
}

\evensidemargin0.5cm
\oddsidemargin0.5cm
%\addtolength{\textwidth}{0cm}
%\setlength{\headheight}{13pt}
\addtolength{\voffset}{0.75cm}
%\addtolength{\textheight}{1.5cm}

%\parindent 0pt

% Fonts & Symbols
\usepackage{latexsym}       % Fuer recht seltene Zeichen
\usepackage{amsfonts}       % Mathe-Schriften
\usepackage{amssymb}        % Symbole
\usepackage{amsmath}        % Symbole
\usepackage{lmodern}        % verwenden der "Latin Modern" ("Computer Modern"++)

\newcommand{\origttfamily}{}    % Trenner für Typewriter
\let\origttfamily=\ttfamily
\renewcommand{\ttfamily}{\origttfamily \hyphenchar\font=`\-}


%
% Document Layout

\usepackage[activate]{pdfcprot} % Margin-Kerning für ein besseres Gesamtbild

% Header & Footer
\usepackage{fancyhdr}       % Kopfzeilen formatieren
\pagestyle{fancy}
\fancyhf{}
\setlength{\headheight}{15pt}
\fancyhead[LE,RO]{\thepage}
\fancyhead[RE]{\scshape \nouppercase{\leftmark}}
\fancyhead[LO]{\scshape \nouppercase{\rightmark}}
\renewcommand{\headrulewidth}{0.4pt}
\renewcommand{\footrulewidth}{0.4pt}
\fancypagestyle{plain}{
 \fancyhead[RE,LO]{}
 \renewcommand{\headrulewidth}{0pt}
}
\fancypagestyle{simple}{
 \fancyhead[RE,LO]{}
 \renewcommand{\headrulewidth}{0pt}
 \renewcommand{\footrulewidth}{0pt}
}
\fancypagestyle{light}{
 \fancyhead[RE,LO]{}
}

% ClearDoublePage fix
\makeatletter 
\def\cleardoublepage{\clearpage\if@twoside \ifodd\c@page\else% 
%\hbox{}% 
%\thispagestyle{simple}
%\newpage% 
%\if@twocolumn\hbox{}\newpage\fi
\fi\fi}
\makeatother 

% Headlines
\renewcommand{\thechapter}{\Roman{chapter}}
\newcounter{newchapter}
\numberwithin{section}{newchapter}
\renewcommand{\thefigure}{\arabic{chapter}.\arabic{figure}}
%\renewcommand{\thesection}{\arabic{chapter}.\arabic{section}}

\usepackage{titlesec}
\setcounter{secnumdepth}{3}
\titleformat{\chapter}[display]%
    {\huge\center\bf}%
    {\Large\mdseries\scshape Kapitel \thechapter}%
    {0cm}{\setcounter{newchapter}{\value{chapter}}}[\vspace{2ex}\titlerule]
\titlespacing*{\chapter}{0pt}{0ex}{8ex}
\titleformat{\subsubsection}{\normalsize\bfseries}{\thesubsubsection}{.75em}{}
\titleformat{\paragraph}[runin]{\bfseries}{}{0pt}{}[.]
\titleformat{\subparagraph}[runin]{\itshape}{}{0pt}{}[.]

% Table of Contents
\usepackage[titles]{tocloft}

\setlength{\cftbeforetoctitleskip}{0ex}
\setlength{\cftaftertoctitleskip}{0ex}
\renewcommand{\cfttoctitlefont}{}

\setlength{\cftbeforeloftitleskip}{4ex}
\setlength{\cftafterloftitleskip}{1ex}
\renewcommand{\cftloftitlefont}{\LARGE}

\setlength{\cftbeforelottitleskip}{4ex}
\setlength{\cftafterlottitleskip}{1ex}
\renewcommand{\cftlottitlefont}{\LARGE}

\newcommand\listingname{Verzeichnis der Listings}
\newlistof[chapter]{listing}{lst}{\listingname}
\setlength{\cftbeforelsttitleskip}{4ex}
\setlength{\cftafterlsttitleskip}{1ex}
\renewcommand{\cftlsttitlefont}{\LARGE}

\newcommand\theoremsname{Theoremverzeichnis}
\newlistof[chapter]{theorems}{lthm}{\theoremsname}
\setlength{\cftbeforelthmtitleskip}{4ex}
\setlength{\cftafterlthmtitleskip}{1ex}
\renewcommand{\cftlthmtitlefont}{\LARGE}

\setcounter{tocdepth}{2}
\setlength{\cftbeforechapskip}{1.0ex}
\setlength{\cftbeforesecskip}{0ex}
\setlength{\cftbeforesubsecskip}{-.2ex}
\newcommand\tocentry[1]{\addcontentsline{toc}{chapter}{#1}}
\newcommand{\ttsubsection}[1]{\subsection[\texorpdfstring{\texttt{\slshape #1}}{#1}]{\texttt{#1}}}
\newcommand\addtotheorems[2]{
    \refstepcounter{theorems}
    \addcontentsline{lthm}{theorems}{\protect\numberline{\thetheorems}\textbf{#1:} #2}
}
\newcommand\addlistspace[1]{
    \addtocontents{#1}{\vspace{1.3ex}}
}
\setlength{\cftchapnumwidth}{20pt}
\setlength{\cftsecnumwidth}{20pt}
\setlength{\cftsecindent}{20pt}
\setlength{\cftsubsecindent}{40pt}

% Glossar
%\usepackage[number=none,style=altlist]{glossary}
%\renewcommand{\glosslabel}[2]{\sffamily #2}
%\makeglossary


%
% Page Elements

% Captions & Figures
\usepackage{graphicx}       % Grafiken einbinden mit vielen Optionen
\graphicspath{{./figures/}}

% Tables
\usepackage{booktabs}       % Bessere Tabellen.

% Theorems
\usepackage{framed}     % Rahmen für Theoreme
\usepackage{soul}
\usepackage[amsmath,framed,thmmarks,standard]{ntheorem} % erweiterte Theorem-Umgebungen.
\newcounter{main}[chapter]
\numberwithin{main}{newchapter}
\newcounter{sub}[main] %beginne mit jedem Theorem von vorn

\makeatletter
 \newtheoremstyle{subtheorem}%
 {\item[\hskip\labelsep \theorem@headerfont \underline{##1\ ##2\theorem@separator}]}%
 {\item[\hskip\labelsep \theorem@headerfont \underline{##1\ ##2\ (##3)\theorem@separator}]}%
 \newtheoremstyle{subtheoremnonumber}%
 {\item[\theorem@headerfont\hskip\labelsep \underline{##1\theorem@separator}]}%
 {\item[\theorem@headerfont\hskip\labelsep \underline{##1\ (##3)\theorem@separator}]}%
\makeatother

%Theoreme in Kästchen
\theoremseparator{.}
\theorembodyfont{\itshape}
\theoremindent 6pt
\newframedtheorem{fsatz}[main]{Satz}
\newframedtheorem{flemma}[main]{Lemma}
\newframedtheorem{fkorollar}[main]{Korollar}
\newframedtheorem{fproposition}[main]{Proposition}
\newframedtheorem{fbehauptung}[main]{Behauptung}
\renewtheorem{satz}[main]{Satz}
\renewtheorem{lemma}[main]{Lemma}
\renewtheorem{korollar}[main]{Korollar}
\renewtheorem{proposition}[main]{Proposition}
\newframedtheorem{behauptung}[main]{Behauptung}
\newframedtheorem{fakt}[main]{Fakt}

%Theoreme ohne Kästchen, eingerückt
\theorempreskip{5pt}
\theorempostskip{5pt}
\theoremindent 15pt
\theorembodyfont{\upshape}
\newtheorem{fdefinition}[main]{Definition}
\renewtheorem{definition}[main]{Definition}
\renewtheorem{beispiel}[main]{Beispiel}
\newtheorem{algo}[main]{Algorithmus}
\newtheorem{fbemerkung}[main]{Bemerkung}
\newtheorem{fbemerkungen}[main]{Bemerkungen}
\newtheorem{falgorithmus}[main]{Algorithmus}
\newtheorem{fbeobachtung}[main]{Beobachtung}

%Sub-Theoreme mit Nummerierung
\theorempreskip{0pt}
\theorempostskip{0pt}
\theoremseparator{.}
\theoremheaderfont{\normalfont\itshape\ul}
\theoremindent 0pt
\theoremstyle{subtheorem}
\newtheorem{subbehauptung}[sub]{Behauptung}
\newtheorem{subbeobachtung}[sub]{Beobachtung}

%Sub-Theoreme ohne Nummerierung
\theoremstyle{subtheoremnonumber}
\newtheorem{subanmerkung}{Anmerkung}
\newtheorem{subidee}{Idee}
\renewtheorem{subbehauptung*}{Behauptung}
\newtheorem{subbeispiel}{Beispiel}
\theoremsymbol{\ensuremath{_{\operatorname{q.e.d.}}}}
\newtheorem{subbeweis}{Beweis}

%Theoreme mit Einrückung, ohne Kästchen, ohne Nummerierung
\theorempreskip{5pt}
\theorempostskip{5pt}
\theoremseparator{.\setcounter{sub}{0}}
\theoremheaderfont{\normalfont\bfseries}
\theoremsymbol{}
\theoremstyle{nonumberplain}
\theoremindent 15pt
\renewtheorem{bemerkung}{Bemerkung}
\renewtheorem{beispiel*}{Beispiel}
\renewtheorem{falgorithmus*}{Algorithmus}
\renewtheorem{fbeobachtung*}[main]{Beobachtung}

%Theoreme ohne Einrückung, ohne Kästchen, ohne Nummerierung
\theoremindent 0pt
\theoremsymbol{\ensuremath{_\blacksquare}}
\renewtheorem{beweis}{Beweis}
\newtheorem{beweisidee}{Beweisidee}
\newtheorem{beweisstrategie}{Beweisstrategie}

\theorembodyfont{\itshape}
\theoremsymbol{}
\renewtheorem{satz*}{Satz}


%
% Inline

\usepackage{url}        % URL's zitieren
\usepackage{numprint}       % Zahlen formatieren
\newcommand\notice[1]{}     % Notiz
\newcommand\seppar{ \vspace{2ex} \noindent } % Neuer Absatz
\newcommand\name[1]{{\em #1}}   % Namen
%\newcommand\ilcapt[1]{{\sffamily\bfseries #1}} % inline caption

\usepackage[german]{todonotes}
\usepackage{enumitem}

\setlist[enumerate]{label=(\roman*)}
\numberwithin{equation}{newchapter}

\usepackage{float}
\usepackage[hypcap,labelsep=period,labelfont=bf,justification=raggedleft]{caption}


% Listings
\usepackage{minted}
\usepackage[plain,longend,linesnumbered]{algorithm2e}

\makeatletter
\renewcommand{\@algocf@capt@plain}{top}
\renewcommand{\algocf@makecaption@plain}[2]{%
  \global\sbox\algocf@capbox{\hskip\AlCapHSkip% .5\algomargin%
    \parbox[t]{\hsize}{\algocf@captiontext{#1}{#2}}}% then caption is not centered
}
\makeatother

\newlength{\algoindent}
\setlength\algoindent{15pt}

\newcommand{\capsty}[1]{\underline{\FuncSty{#1}}}
\SetKwInput{KwIn}{Eingabe}
\DontPrintSemicolon
\SetAlgoLined
\SetNlSty{textnormal}{(}{)}
\SetAlgoNlRelativeSize{-3}
\SetAlgorithmName{}{}{}
\SetAlCapNameSty{capsty}
\SetAlgoCaptionSeparator{}
\SetAlCapSkip{0pt}
\SetAlCapHSkip{0pt}
\SetAlgoInsideSkip{noskip}
\NoCaptionOfAlgo


%Weiteres Zeugs....
\newcommand{\IA}{\textup{(IA)}\xspace}
\newcommand{\IV}{\textup{(IV)}\xspace}
\newcommand{\IS}{\textup{(IS)}\xspace}

\newcommand{\Var}{\operatorname{Var}\nolimits}
\newcommand{\E}{\operatorname{E}\nolimits}
\renewcommand{\Pr}{\operatorname{Pr}\nolimits}
\renewcommand{\O}[1]{\mathcal{O}(#1)}
\newcommand{\bigO}[1]{\mathcal{O}\!\left(#1\right)}

\renewcommand{\mod}{\operatorname{mod}}
\renewcommand{\div}{\operatorname{div}}
\newcommand{\GF}{\operatorname{GF}}
\newcommand{\id}{\operatorname{id}}

%Noch mehr weiteres Zeugs...
\usepackage{changepage}
\usepackage{chngcntr}
\usepackage{afterpage}

\newenvironment{problem}[1][15pt]{\begin{adjustwidth}{#1}{0pt}}{\end{adjustwidth}}

\counterwithout{footnote}{chapter}
%\newboolean{myfnonpage}
%\setboolean{myfnonpage}{false}

\fancypagestyle{footnotepage}{
 \renewcommand{\footrulewidth}{0pt}
}

\fancypagestyle{footnotepageplain}{
  \fancyhead[RE,LO]{}
 \renewcommand{\footrulewidth}{0pt}
 \renewcommand{\headrulewidth}{0pt}
}

\newcommand{\myfootnote}[1]{%
\footnote{#1}%
\thispagestyle{footnotepage}%
\enlargethispage{35.7pt}%
}

\newcommand{\myfootnotetext}[1]{%
\footnotetext{#1}%
\thispagestyle{footnotepage}%
\enlargethispage{35.7pt}%
}

\newcommand{\myfootnoteplain}[1]{%
\footnote{#1}%
\thispagestyle{footnotepageplain}%
\enlargethispage{35.7pt}%
}

\newcommand{\myfootnotetextplain}[1]{%
\footnotetext{#1}%
\thispagestyle{footnotepageplain}%
\enlargethispage{35.7pt}%
}

\newcommand{\myfootnotemulti}[1]{%
\footnote{#1}%
\enlargethispage{21.7pt}%
}

\renewcommand{\footnoterule}{%
%\setboolean{myfnonpage}{false}%
\vfill%
\kern 3pt%
\hrule width \textwidth%
\kern 2.6pt%
}

\usepackage{array}
\newcolumntype{x}[1]{>{\centering\arraybackslash\hspace{0pt}}m{#1}}

\usepackage{svg}